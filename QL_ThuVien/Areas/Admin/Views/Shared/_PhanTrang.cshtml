@{
    int tongSoTrang = (int)ViewBag.tongSoTrang;
    var pages = Enumerable.Range(1, tongSoTrang).ToList();
}

@if (ViewBag.tongSoTrang > 0)
{
    <div class="pagination-btn" id="pagination-btn" number-of-page="@ViewBag.tongSoTrang" current-page="@ViewBag.page" current-path="@ViewBag.CurrentPath">
        <nav aria-label="Page navigation">
            <ul class="pagination">
                <li class="page-item">
                    <button class="page-link" id="btn-prev" aria-label="Previous">
                        <span aria-hidden="true"><i class="fa-solid fa-angles-left"></i></span>
                    </button>
                </li>

                @if (ViewBag.tongSoTrang < 4)
                {
                    foreach (var item in pages)
                    {
                        <li class="page-item @(ViewBag.page == item ? "active" : "")">
                            <a class="page-link" href="@($"{ViewBag.CurrentPath}page={item}")">@item</a>
                        </li>
                    }
                }
                else if (ViewBag.page + 1 >= ViewBag.tongSoTrang)
                {
                    <li class="page-item">
                        <a class="page-link" href="@($"{ViewBag.CurrentPath}page=1")">1</a>
                    </li>
                    <li class="page-item">
                        <a class="page-link">...</a>
                    </li>
                    for (int i = 1; i >= 0; i--)
                    {
                        int page = ViewBag.tongSoTrang - i;
                        <li class="page-item @(ViewBag.page == page ? "active" : "")">
                            <a class="page-link" href="@($"{ViewBag.CurrentPath}page={page}")">@page</a>
                        </li>
                    }
                }
                else if (ViewBag.page == 2)
                {
                    for (int i = 0; i < 2; i++)
                    {
                        int page = i + 1;
                        <li class="page-item @(ViewBag.page == page ? "active" : "")">
                            <a class="page-link" href="@($"{ViewBag.CurrentPath}page={page}")">@page</a>
                        </li>
                    }
                    <li class="page-item">
                        <a class="page-link">...</a>
                    </li>
                    <li class="page-item @(ViewBag.page == ViewBag.tongSoTrang ? "active" : "")">
                        <a class="page-link" href="@($"{ViewBag.CurrentPath}page={ViewBag.tongSoTrang}")">@ViewBag.tongSoTrang</a>
                    </li>
                }
                else if (ViewBag.page == 1)
                {
                    for (int i = 0; i < 2; i++)
                    {
                        int page = i + ViewBag.page;
                        <li class="page-item @(ViewBag.page == page ? "active" : "")">
                            <a class="page-link" href="@($"{ViewBag.CurrentPath}page={page}")">@page</a>
                        </li>
                    }
                    <li class="page-item">
                        <a class="page-link">...</a>
                    </li>
                    <li class="page-item @(ViewBag.page == ViewBag.tongSoTrang ? "active" : "")">
                        <a class="page-link" href="@($"{ViewBag.CurrentPath}page={ViewBag.tongSoTrang}")">@ViewBag.tongSoTrang</a>
                    </li>
                }
                else
                {
                    for (int i = -1; i <= 0; i++)
                    {
                        int page = ViewBag.page + i;
                        <li class="page-item @(ViewBag.page == page ? "active" : "")">
                            <a class="page-link" href="@($"{ViewBag.CurrentPath}page={page}")">@page</a>
                        </li>
                    }
                    <li class="page-item">
                        <a class="page-link">...</a>
                    </li>
                    <li class="page-item @(ViewBag.page == ViewBag.tongSoTrang ? "active" : "")">
                        <a class="page-link" href="@($"{ViewBag.CurrentPath}page={ViewBag.tongSoTrang}")">@ViewBag.tongSoTrang</a>
                    </li>
                }

                <li class="page-item">
                    <button class="page-link" id="btn-next" aria-label="Next">
                        <span aria-hidden="true"><i class="fa-solid fa-angles-right"></i></span>
                    </button>
                </li>
            </ul>
        </nav>
    </div>
}