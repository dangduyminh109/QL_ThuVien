@using QL_ThuVien.Models
@model QL_ThuVien.Models.CALAMVIEC

@{
    ViewBag.Title = "Cập nhật ca làm việc";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
}

@section Styles{
    <link href="~/Content/admin/css/page/create-edit-detail.css" rel="stylesheet" />
}

@Html.Partial("_PageHeader", Tuple.Create("Cập nhật", new List<Tuple<string, string>> {
    Tuple.Create("Ca làm việc", "/Admin/Calamviec"),
    Tuple.Create("Cập nhật", $"/Admin/Calamviec/Edit/{Model.maCA}")
}))

@if (ViewBag.NoAccess != null && (bool)ViewBag.NoAccess)
{
    <h1 class="text-center text-warning mt-2">Bạn Không Có Quyền Truy Cập Trang Này</h1>
}
else
{
    <div class="create account">
        @using (Html.BeginForm("Edit", "Calamviec", FormMethod.Post))
        {
            @Html.AntiForgeryToken()
            @Html.HiddenFor(m => m.maCA)

            @* Hiển thị lỗi ModelState *@
            if (!ViewData.ModelState.IsValid)
            {
                @Html.ValidationSummary(false, "", new { @class = "alert alert-danger" })
            }

            <h1 class="title">Thông tin chung</h1>
            <div class="general">
                <div class="form-group">

                    <div class="form-item">
                        <label for="buoi">Buổi <span class="important-item">*</span></label>
                        <input type="text" class="form-control" name="buoi" id="buoi" required
                               value="@Html.Raw(Request.Form["buoi"] ?? Model?.buoi ?? "")" />
                        @Html.ValidationMessageFor(m => m.buoi, "", new { @class = "text-danger" })
                    </div>
                </div>
                    <div class="form-group">
                        <div class="form-item">
                            <label for="thoiGianBD">Thời gian bắt đầu <span class="important-item">*</span></label>
                            <input type="time" class="form-control" name="thoiGianBD" id="thoiGianBD" required
                                   value="@(Request.Form["thoiGianBD"] ?? (Model?.thoiGianBD.HasValue == true ? Model.thoiGianBD.Value.ToString(@"hh\:mm") : ""))" />
                            @Html.ValidationMessageFor(m => m.thoiGianBD, "", new { @class = "text-danger" })
                        </div>

                        <div class="form-item">
                            <label for="thoiGianKT">Thời gian kết thúc <span class="important-item">*</span></label>
                            <input type="time" class="form-control" name="thoiGianKT" id="thoiGianKT" required
                                   value="@(Request.Form["thoiGianKT"] ?? (Model?.thoiGianKT.HasValue == true ? Model.thoiGianKT.Value.ToString(@"hh\:mm") : ""))" />
                            @Html.ValidationMessageFor(m => m.thoiGianKT, "", new { @class = "text-danger" })
                        </div>

                    </div>
                </div>

            <div class="form-group__btn mt-3">
                <a href="/Admin/Calamviec" class="btn btn-secondary">Quay lại</a>
                <button type="submit" class="btn btn-primary">Cập nhật ca làm việc</button>
            </div>
        }
    </div>
}
